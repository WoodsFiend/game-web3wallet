{"mappings":"C,A,W,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,C,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,C,E,iB,C,E,E,Q,C,E,Q,S,C,C,C,E,I,E,E,E,S,E,E,O,C,O,I,C,G,O,C,S,C,E,Y,G,A,e,G,O,S,C,c,C,I,C,E,I,O,c,C,E,E,C,W,C,E,I,W,O,A,C,C,E,A,C,E,E,G,E,Q,S,C,C,C,E,E,E,O,C,W,W,O,C,G,I,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,S,C,C,C,C,C,C,C,E,I,E,E,U,M,C,E,E,E,E,A,O,E,E,O,wB,C,E,G,E,G,A,U,O,S,A,Y,O,Q,Q,C,E,Q,Q,C,E,E,E,Q,I,I,E,E,M,C,E,G,E,I,C,E,C,C,E,A,G,C,E,A,C,E,E,E,G,E,E,E,E,E,G,E,E,E,G,C,E,O,E,G,G,O,c,C,E,E,G,C,EGkBA,IAAM,EAAc,cAGP,EAAN,cAAuB,EAAA,UAAA,CAqB5B,aAAA,CACE,KAAK,GAlBC,IAAA,CAAA,WAAW,CAAmB,EAAE,CAEhC,IAAA,CAAA,eAAe,CAAqB,KAAA,EAG3B,IAAA,CAAA,IAAI,CAAG,AAAA,EAAA,eAAA,CAAgB,KAAK,CAAC,IAAI,CAEjC,IAAA,CAAA,WAAW,CAAG,AAAA,EAAA,iBAAA,CAAkB,KAAK,CAAC,WAAW,CAEjD,IAAA,CAAA,aAAa,CAAG,AAAA,EAAA,iBAAA,CAAkB,KAAK,CAAC,aAAa,CAErD,IAAA,CAAA,SAAS,CAAG,AAAA,EAAA,iBAAA,CAAkB,KAAK,CAAC,WAAW,CAE/C,IAAA,CAAA,OAAO,CAAG,AAAA,EAAA,eAAA,CAAgB,KAAK,CAAC,OAAO,CAEvC,IAAA,CAAA,KAAK,CAAG,AAAA,EAAA,eAAA,CAAgB,KAAK,CAAC,KAAK,CAIlD,IAAI,CAAC,iBAAiB,GACtB,AAAA,CAAA,EAAA,EAAA,aAAA,AAAA,EAAc,QAAQ,GACtB,IAAI,CAAC,WAAW,CAAC,IAAI,CAEjB,AAAA,CAAA,EAAA,EAAA,eAAA,AAAA,EAAgB,YAAY,CAAC,OAAQ,AAAA,GAAQ,EAAM,IAAI,CAAC,MAAM,GA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","sources":["<anon>","node_modules/@web3modal/scaffold-ui/exports/w3m-modal.ts","node_modules/@web3modal/scaffold-ui/dist/esm/src/modal/w3m-modal/index.js","node_modules/@web3modal/scaffold-ui/src/modal/w3m-modal/index.ts","node_modules/@web3modal/scaffold-ui/dist/esm/src/modal/w3m-modal/styles.js","node_modules/@web3modal/scaffold-ui/src/modal/w3m-modal/styles.ts","node_modules/@parcel/runtime-js/lib/runtime-de81b95f9089cc72.js"],"sourcesContent":["(function () {\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule' || Object.prototype.hasOwnProperty.call(dest, key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      }\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  var parcelRequire = $parcel$global[\"parcelRequired248\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"dnS6b\", function(module, exports) {\n\nvar $4i0r2 = parcelRequire(\"4i0r2\");\n$parcel$exportWildcard(module.exports, $4i0r2);\n\n});\nparcelRegister(\"4i0r2\", function(module, exports) {\n\n$parcel$export(module.exports, \"W3mModal\", function () { return $31f92e42900021ff$export$8f54aa55129a8184; });\n\nvar $eNJDH = parcelRequire(\"eNJDH\");\n\nvar $kbczO = parcelRequire(\"kbczO\");\n\nvar $6uVJz = parcelRequire(\"6uVJz\");\n\nvar $2HtFW = parcelRequire(\"2HtFW\");\n\nvar $ce2dH = parcelRequire(\"ce2dH\");\nvar $31f92e42900021ff$var$__decorate = undefined && undefined.__decorate || function(decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst $31f92e42900021ff$var$SCROLL_LOCK = \"scroll-lock\";\n\n\nlet $31f92e42900021ff$export$8f54aa55129a8184 = class W3mModal extends (0, $6uVJz.LitElement) {\n    constructor(){\n        super();\n        this.unsubscribe = [];\n        this.abortController = undefined;\n        this.open = (0, $eNJDH.ModalController).state.open;\n        this.caipAddress = (0, $eNJDH.AccountController).state.caipAddress;\n        this.isSiweEnabled = (0, $eNJDH.OptionsController).state.isSiweEnabled;\n        this.connected = (0, $eNJDH.AccountController).state.isConnected;\n        this.loading = (0, $eNJDH.ModalController).state.loading;\n        this.shake = (0, $eNJDH.ModalController).state.shake;\n        this.initializeTheming();\n        (0, $eNJDH.ApiController).prefetch();\n        this.unsubscribe.push(...[\n            (0, $eNJDH.ModalController).subscribeKey(\"open\", (val)=>val ? this.onOpen() : this.onClose()),\n            (0, $eNJDH.ModalController).subscribeKey(\"shake\", (val)=>this.shake = val),\n            (0, $eNJDH.ModalController).subscribeKey(\"loading\", (val)=>{\n                this.loading = val;\n                this.onNewAddress((0, $eNJDH.AccountController).state.caipAddress);\n            }),\n            (0, $eNJDH.AccountController).subscribeKey(\"isConnected\", (val)=>this.connected = val),\n            (0, $eNJDH.AccountController).subscribeKey(\"caipAddress\", (val)=>this.onNewAddress(val)),\n            (0, $eNJDH.OptionsController).subscribeKey(\"isSiweEnabled\", (val)=>this.isSiweEnabled = val)\n        ]);\n        (0, $eNJDH.EventsController).sendEvent({\n            type: \"track\",\n            event: \"MODAL_LOADED\"\n        });\n    }\n    disconnectedCallback() {\n        this.unsubscribe.forEach((unsubscribe)=>unsubscribe());\n        this.onRemoveKeyboardListener();\n    }\n    render() {\n        return this.open ? (0, $6uVJz.html)`\n          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid=\"w3m-modal-overlay\">\n            <wui-card\n              shake=\"${this.shake}\"\n              role=\"alertdialog\"\n              aria-modal=\"true\"\n              tabindex=\"0\"\n              data-testid=\"w3m-modal-card\"\n            >\n              <w3m-header></w3m-header>\n              <w3m-router></w3m-router>\n              <w3m-snackbar></w3m-snackbar>\n            </wui-card>\n          </wui-flex>\n          <w3m-tooltip></w3m-tooltip>\n        ` : null;\n    }\n    async onOverlayClick(event) {\n        if (event.target === event.currentTarget) await this.handleClose();\n    }\n    async handleClose() {\n        const isSiweSignScreen = (0, $eNJDH.RouterController).state.view === \"ConnectingSiwe\";\n        const isApproveSignScreen = (0, $eNJDH.RouterController).state.view === \"ApproveTransaction\";\n        if (this.isSiweEnabled) {\n            const { SIWEController: SIWEController } = await (parcelRequire(\"XE6yD\"));\n            const isUnauthenticated = SIWEController.state.status !== \"success\";\n            if (isUnauthenticated && (isSiweSignScreen || isApproveSignScreen)) (0, $eNJDH.ModalController).shake();\n            else (0, $eNJDH.ModalController).close();\n        } else (0, $eNJDH.ModalController).close();\n    }\n    initializeTheming() {\n        const { themeVariables: themeVariables, themeMode: themeMode } = (0, $eNJDH.ThemeController).state;\n        const defaultThemeMode = (0, $kbczO.UiHelperUtil).getColorTheme(themeMode);\n        (0, $kbczO.initializeTheming)(themeVariables, defaultThemeMode);\n    }\n    onClose() {\n        this.open = false;\n        this.classList.remove(\"open\");\n        this.onScrollUnlock();\n        (0, $eNJDH.SnackController).hide();\n        this.onRemoveKeyboardListener();\n    }\n    onOpen() {\n        this.open = true;\n        this.classList.add(\"open\");\n        this.onScrollLock();\n        this.onAddKeyboardListener();\n    }\n    onScrollLock() {\n        const styleTag = document.createElement(\"style\");\n        styleTag.dataset[\"w3m\"] = $31f92e42900021ff$var$SCROLL_LOCK;\n        styleTag.textContent = `\n      body {\n        touch-action: none;\n        overflow: hidden;\n        overscroll-behavior: contain;\n      }\n      w3m-modal {\n        pointer-events: auto;\n      }\n    `;\n        document.head.appendChild(styleTag);\n    }\n    onScrollUnlock() {\n        const styleTag = document.head.querySelector(`style[data-w3m=\"${$31f92e42900021ff$var$SCROLL_LOCK}\"]`);\n        if (styleTag) styleTag.remove();\n    }\n    onAddKeyboardListener() {\n        this.abortController = new AbortController();\n        const card = this.shadowRoot?.querySelector(\"wui-card\");\n        card?.focus();\n        window.addEventListener(\"keydown\", (event)=>{\n            if (event.key === \"Escape\") this.handleClose();\n            else if (event.key === \"Tab\") {\n                const { tagName: tagName } = event.target;\n                if (tagName && !tagName.includes(\"W3M-\") && !tagName.includes(\"WUI-\")) card?.focus();\n            }\n        }, this.abortController);\n    }\n    onRemoveKeyboardListener() {\n        this.abortController?.abort();\n        this.abortController = undefined;\n    }\n    async onNewAddress(caipAddress) {\n        if (!this.connected || this.loading) return;\n        const previousAddress = (0, $eNJDH.CoreHelperUtil).getPlainAddress(this.caipAddress);\n        const newAddress = (0, $eNJDH.CoreHelperUtil).getPlainAddress(caipAddress);\n        const previousNetworkId = (0, $eNJDH.CoreHelperUtil).getNetworkId(this.caipAddress);\n        const newNetworkId = (0, $eNJDH.CoreHelperUtil).getNetworkId(caipAddress);\n        this.caipAddress = caipAddress;\n        if (this.isSiweEnabled) {\n            const { SIWEController: SIWEController } = await (parcelRequire(\"XE6yD\"));\n            const session = await SIWEController.getSession();\n            if (session && previousAddress && newAddress && previousAddress !== newAddress) {\n                if (SIWEController.state._client?.options.signOutOnAccountChange) {\n                    await SIWEController.signOut();\n                    this.onSiweNavigation();\n                }\n                return;\n            }\n            if (session && previousNetworkId && newNetworkId && previousNetworkId !== newNetworkId) {\n                if (SIWEController.state._client?.options.signOutOnNetworkChange) {\n                    await SIWEController.signOut();\n                    this.onSiweNavigation();\n                }\n                return;\n            }\n            this.onSiweNavigation();\n        }\n    }\n    onSiweNavigation() {\n        if (this.open) (0, $eNJDH.RouterController).push(\"ConnectingSiwe\");\n        else (0, $eNJDH.ModalController).open({\n            view: \"ConnectingSiwe\"\n        });\n    }\n};\n$31f92e42900021ff$export$8f54aa55129a8184.styles = (0, $ce2dH.default);\n$31f92e42900021ff$var$__decorate([\n    (0, $2HtFW.state)()\n], $31f92e42900021ff$export$8f54aa55129a8184.prototype, \"open\", void 0);\n$31f92e42900021ff$var$__decorate([\n    (0, $2HtFW.state)()\n], $31f92e42900021ff$export$8f54aa55129a8184.prototype, \"caipAddress\", void 0);\n$31f92e42900021ff$var$__decorate([\n    (0, $2HtFW.state)()\n], $31f92e42900021ff$export$8f54aa55129a8184.prototype, \"isSiweEnabled\", void 0);\n$31f92e42900021ff$var$__decorate([\n    (0, $2HtFW.state)()\n], $31f92e42900021ff$export$8f54aa55129a8184.prototype, \"connected\", void 0);\n$31f92e42900021ff$var$__decorate([\n    (0, $2HtFW.state)()\n], $31f92e42900021ff$export$8f54aa55129a8184.prototype, \"loading\", void 0);\n$31f92e42900021ff$var$__decorate([\n    (0, $2HtFW.state)()\n], $31f92e42900021ff$export$8f54aa55129a8184.prototype, \"shake\", void 0);\n$31f92e42900021ff$export$8f54aa55129a8184 = $31f92e42900021ff$var$__decorate([\n    (0, $kbczO.customElement)(\"w3m-modal\")\n], $31f92e42900021ff$export$8f54aa55129a8184);\n\n});\nparcelRegister(\"ce2dH\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", function () { return $8e6883b321ace9b4$export$2e2bcd8739ae039; });\n\nvar $6uVJz = parcelRequire(\"6uVJz\");\nvar $8e6883b321ace9b4$export$2e2bcd8739ae039 = (0, $6uVJz.css)`\n  :host {\n    z-index: var(--w3m-z-index);\n    display: block;\n    backface-visibility: hidden;\n    will-change: opacity;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    opacity: 0;\n    background-color: var(--wui-cover);\n    transition: opacity 0.2s var(--wui-ease-out-power-2);\n    will-change: opacity;\n  }\n\n  :host(.open) {\n    opacity: 1;\n  }\n\n  wui-card {\n    max-width: var(--w3m-modal-width);\n    width: 100%;\n    position: relative;\n    animation: zoom-in 0.2s var(--wui-ease-out-power-2);\n    animation-fill-mode: backwards;\n    outline: none;\n  }\n\n  wui-card[shake='true'] {\n    animation:\n      zoom-in 0.2s var(--wui-ease-out-power-2),\n      w3m-shake 0.5s var(--wui-ease-out-power-2);\n  }\n\n  wui-flex {\n    overflow-x: hidden;\n    overflow-y: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n  }\n\n  @media (max-height: 700px) and (min-width: 431px) {\n    wui-flex {\n      align-items: flex-start;\n    }\n\n    wui-card {\n      margin: var(--wui-spacing-xxl) 0px;\n    }\n  }\n\n  @media (max-width: 430px) {\n    wui-flex {\n      align-items: flex-end;\n    }\n\n    wui-card {\n      max-width: 100%;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      border-bottom: none;\n      animation: slide-in 0.2s var(--wui-ease-out-power-2);\n    }\n\n    wui-card[shake='true'] {\n      animation:\n        slide-in 0.2s var(--wui-ease-out-power-2),\n        w3m-shake 0.5s var(--wui-ease-out-power-2);\n    }\n  }\n\n  @keyframes zoom-in {\n    0% {\n      transform: scale(0.95) translateY(0);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes slide-in {\n    0% {\n      transform: scale(1) translateY(50px);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes w3m-shake {\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n    20% {\n      transform: scale(1) rotate(-1deg);\n    }\n    40% {\n      transform: scale(1) rotate(1.5deg);\n    }\n    60% {\n      transform: scale(1) rotate(-1.5deg);\n    }\n    80% {\n      transform: scale(1) rotate(1deg);\n    }\n    100% {\n      transform: scale(1) rotate(0deg);\n    }\n  }\n\n  @keyframes w3m-view-height {\n    from {\n      height: var(--prev-height);\n    }\n    to {\n      height: var(--new-height);\n    }\n  }\n`;\n\n});\n\nparcelRegister(\"XE6yD\", function(module, exports) {\n\n\nmodule.exports = (parcelRequire(\"4GIuy\"))((parcelRequire(\"Zsba3\")).resolve(\"bdAau\")).then(()=>parcelRequire(\"1yCWa\"));\n\n});\n\n\n\n})();\n//# sourceMappingURL=w3m-modal.034305a4.js.map\n",null,"var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AccountController, ApiController, CoreHelperUtil, EventsController, ModalController, OptionsController, RouterController, SnackController, ThemeController } from '@web3modal/core';\nimport { UiHelperUtil, customElement, initializeTheming } from '@web3modal/ui';\nimport { LitElement, html } from 'lit';\nimport { state } from 'lit/decorators.js';\nimport styles from './styles.js';\nconst SCROLL_LOCK = 'scroll-lock';\nlet W3mModal = class W3mModal extends LitElement {\n    constructor() {\n        super();\n        this.unsubscribe = [];\n        this.abortController = undefined;\n        this.open = ModalController.state.open;\n        this.caipAddress = AccountController.state.caipAddress;\n        this.isSiweEnabled = OptionsController.state.isSiweEnabled;\n        this.connected = AccountController.state.isConnected;\n        this.loading = ModalController.state.loading;\n        this.shake = ModalController.state.shake;\n        this.initializeTheming();\n        ApiController.prefetch();\n        this.unsubscribe.push(...[\n            ModalController.subscribeKey('open', val => (val ? this.onOpen() : this.onClose())),\n            ModalController.subscribeKey('shake', val => (this.shake = val)),\n            ModalController.subscribeKey('loading', val => {\n                this.loading = val;\n                this.onNewAddress(AccountController.state.caipAddress);\n            }),\n            AccountController.subscribeKey('isConnected', val => (this.connected = val)),\n            AccountController.subscribeKey('caipAddress', val => this.onNewAddress(val)),\n            OptionsController.subscribeKey('isSiweEnabled', val => (this.isSiweEnabled = val))\n        ]);\n        EventsController.sendEvent({ type: 'track', event: 'MODAL_LOADED' });\n    }\n    disconnectedCallback() {\n        this.unsubscribe.forEach(unsubscribe => unsubscribe());\n        this.onRemoveKeyboardListener();\n    }\n    render() {\n        return this.open\n            ? html `\n          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid=\"w3m-modal-overlay\">\n            <wui-card\n              shake=\"${this.shake}\"\n              role=\"alertdialog\"\n              aria-modal=\"true\"\n              tabindex=\"0\"\n              data-testid=\"w3m-modal-card\"\n            >\n              <w3m-header></w3m-header>\n              <w3m-router></w3m-router>\n              <w3m-snackbar></w3m-snackbar>\n            </wui-card>\n          </wui-flex>\n          <w3m-tooltip></w3m-tooltip>\n        `\n            : null;\n    }\n    async onOverlayClick(event) {\n        if (event.target === event.currentTarget) {\n            await this.handleClose();\n        }\n    }\n    async handleClose() {\n        const isSiweSignScreen = RouterController.state.view === 'ConnectingSiwe';\n        const isApproveSignScreen = RouterController.state.view === 'ApproveTransaction';\n        if (this.isSiweEnabled) {\n            const { SIWEController } = await import('@web3modal/siwe');\n            const isUnauthenticated = SIWEController.state.status !== 'success';\n            if (isUnauthenticated && (isSiweSignScreen || isApproveSignScreen)) {\n                ModalController.shake();\n            }\n            else {\n                ModalController.close();\n            }\n        }\n        else {\n            ModalController.close();\n        }\n    }\n    initializeTheming() {\n        const { themeVariables, themeMode } = ThemeController.state;\n        const defaultThemeMode = UiHelperUtil.getColorTheme(themeMode);\n        initializeTheming(themeVariables, defaultThemeMode);\n    }\n    onClose() {\n        this.open = false;\n        this.classList.remove('open');\n        this.onScrollUnlock();\n        SnackController.hide();\n        this.onRemoveKeyboardListener();\n    }\n    onOpen() {\n        this.open = true;\n        this.classList.add('open');\n        this.onScrollLock();\n        this.onAddKeyboardListener();\n    }\n    onScrollLock() {\n        const styleTag = document.createElement('style');\n        styleTag.dataset['w3m'] = SCROLL_LOCK;\n        styleTag.textContent = `\n      body {\n        touch-action: none;\n        overflow: hidden;\n        overscroll-behavior: contain;\n      }\n      w3m-modal {\n        pointer-events: auto;\n      }\n    `;\n        document.head.appendChild(styleTag);\n    }\n    onScrollUnlock() {\n        const styleTag = document.head.querySelector(`style[data-w3m=\"${SCROLL_LOCK}\"]`);\n        if (styleTag) {\n            styleTag.remove();\n        }\n    }\n    onAddKeyboardListener() {\n        this.abortController = new AbortController();\n        const card = this.shadowRoot?.querySelector('wui-card');\n        card?.focus();\n        window.addEventListener('keydown', event => {\n            if (event.key === 'Escape') {\n                this.handleClose();\n            }\n            else if (event.key === 'Tab') {\n                const { tagName } = event.target;\n                if (tagName && !tagName.includes('W3M-') && !tagName.includes('WUI-')) {\n                    card?.focus();\n                }\n            }\n        }, this.abortController);\n    }\n    onRemoveKeyboardListener() {\n        this.abortController?.abort();\n        this.abortController = undefined;\n    }\n    async onNewAddress(caipAddress) {\n        if (!this.connected || this.loading) {\n            return;\n        }\n        const previousAddress = CoreHelperUtil.getPlainAddress(this.caipAddress);\n        const newAddress = CoreHelperUtil.getPlainAddress(caipAddress);\n        const previousNetworkId = CoreHelperUtil.getNetworkId(this.caipAddress);\n        const newNetworkId = CoreHelperUtil.getNetworkId(caipAddress);\n        this.caipAddress = caipAddress;\n        if (this.isSiweEnabled) {\n            const { SIWEController } = await import('@web3modal/siwe');\n            const session = await SIWEController.getSession();\n            if (session && previousAddress && newAddress && previousAddress !== newAddress) {\n                if (SIWEController.state._client?.options.signOutOnAccountChange) {\n                    await SIWEController.signOut();\n                    this.onSiweNavigation();\n                }\n                return;\n            }\n            if (session && previousNetworkId && newNetworkId && previousNetworkId !== newNetworkId) {\n                if (SIWEController.state._client?.options.signOutOnNetworkChange) {\n                    await SIWEController.signOut();\n                    this.onSiweNavigation();\n                }\n                return;\n            }\n            this.onSiweNavigation();\n        }\n    }\n    onSiweNavigation() {\n        if (this.open) {\n            RouterController.push('ConnectingSiwe');\n        }\n        else {\n            ModalController.open({\n                view: 'ConnectingSiwe'\n            });\n        }\n    }\n};\nW3mModal.styles = styles;\n__decorate([\n    state()\n], W3mModal.prototype, \"open\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"caipAddress\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"isSiweEnabled\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"connected\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"loading\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"shake\", void 0);\nW3mModal = __decorate([\n    customElement('w3m-modal')\n], W3mModal);\nexport { W3mModal };\n//# sourceMappingURL=index.js.map",null,"import { css } from 'lit';\nexport default css `\n  :host {\n    z-index: var(--w3m-z-index);\n    display: block;\n    backface-visibility: hidden;\n    will-change: opacity;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    opacity: 0;\n    background-color: var(--wui-cover);\n    transition: opacity 0.2s var(--wui-ease-out-power-2);\n    will-change: opacity;\n  }\n\n  :host(.open) {\n    opacity: 1;\n  }\n\n  wui-card {\n    max-width: var(--w3m-modal-width);\n    width: 100%;\n    position: relative;\n    animation: zoom-in 0.2s var(--wui-ease-out-power-2);\n    animation-fill-mode: backwards;\n    outline: none;\n  }\n\n  wui-card[shake='true'] {\n    animation:\n      zoom-in 0.2s var(--wui-ease-out-power-2),\n      w3m-shake 0.5s var(--wui-ease-out-power-2);\n  }\n\n  wui-flex {\n    overflow-x: hidden;\n    overflow-y: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n  }\n\n  @media (max-height: 700px) and (min-width: 431px) {\n    wui-flex {\n      align-items: flex-start;\n    }\n\n    wui-card {\n      margin: var(--wui-spacing-xxl) 0px;\n    }\n  }\n\n  @media (max-width: 430px) {\n    wui-flex {\n      align-items: flex-end;\n    }\n\n    wui-card {\n      max-width: 100%;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      border-bottom: none;\n      animation: slide-in 0.2s var(--wui-ease-out-power-2);\n    }\n\n    wui-card[shake='true'] {\n      animation:\n        slide-in 0.2s var(--wui-ease-out-power-2),\n        w3m-shake 0.5s var(--wui-ease-out-power-2);\n    }\n  }\n\n  @keyframes zoom-in {\n    0% {\n      transform: scale(0.95) translateY(0);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes slide-in {\n    0% {\n      transform: scale(1) translateY(50px);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes w3m-shake {\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n    20% {\n      transform: scale(1) rotate(-1deg);\n    }\n    40% {\n      transform: scale(1) rotate(1.5deg);\n    }\n    60% {\n      transform: scale(1) rotate(-1.5deg);\n    }\n    80% {\n      transform: scale(1) rotate(1deg);\n    }\n    100% {\n      transform: scale(1) rotate(0deg);\n    }\n  }\n\n  @keyframes w3m-view-height {\n    from {\n      height: var(--prev-height);\n    }\n    to {\n      height: var(--new-height);\n    }\n  }\n`;\n//# sourceMappingURL=styles.js.map",null,"module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"bdAau\"))).then(() => parcelRequire('1yCWa'));"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","self","window","global","parcelRegister","register","module","exports","dest","$4i0r2","keys","forEach","key","prototype","hasOwnProperty","call","source","$31f92e42900021ff$export$8f54aa55129a8184","$eNJDH","$kbczO","$6uVJz","$2HtFW","$ce2dH","$31f92e42900021ff$var$__decorate","decorators","target","desc","d","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","$31f92e42900021ff$var$SCROLL_LOCK","LitElement","constructor","unsubscribe","abortController","undefined","open","ModalController","state","caipAddress","AccountController","isSiweEnabled","OptionsController","connected","isConnected","loading","shake","initializeTheming","ApiController","prefetch","push","subscribeKey","val","onOpen","onClose","onNewAddress","EventsController","sendEvent","type","event","disconnectedCallback","onRemoveKeyboardListener","render","html","onOverlayClick","bind","currentTarget","handleClose","isSiweSignScreen","RouterController","view","isApproveSignScreen","SIWEController","isUnauthenticated","status","close","themeVariables","themeMode","ThemeController","defaultThemeMode","UiHelperUtil","getColorTheme","classList","remove","onScrollUnlock","SnackController","hide","add","onScrollLock","onAddKeyboardListener","styleTag","document","createElement","dataset","textContent","head","appendChild","querySelector","AbortController","card","shadowRoot","focus","addEventListener","tagName","includes","abort","previousAddress","CoreHelperUtil","getPlainAddress","newAddress","previousNetworkId","getNetworkId","newNetworkId","session","getSession","_client","options","signOutOnAccountChange","signOut","onSiweNavigation","signOutOnNetworkChange","styles","default","customElement","$8e6883b321ace9b4$export$2e2bcd8739ae039","css","resolve","then"],"version":3,"file":"w3m-modal.034305a4.js.map"}